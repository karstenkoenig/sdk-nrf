/*
 * Copyright (c) 2022 Nordic Semiconductor ASA
 *
 * SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
 */

/ {
	chosen {
		sdfw,mramc = &mramc;

		sdfw,tdd-spu = &spu200;
		sdfw,grtc-spu = &spu133;

		sdfw,gpio-spu = &spu131;
		zephyr,entropy = &cracen;
		zephyr,console = &uart137;
	};
};

&cracen {
	status = "okay";
};

&ram3x_cpusec {
	status = "okay";
};

&uart137 {
	status = "okay";
	memory-regions = <&ram3x_cpusec>;
};

&mram_controller {
	mram@e1eec00 {
		compatible = "soc-nv-flash";
		reg = <0xe1eec00 DT_SIZE_K(17)>;
		erase-block-size = <128>;
		/* Hardcoded inside the soc_flash_nrf_mram.c (MRAM_WORD_SIZE) */
		write-block-size = < 0x10 >;

		partitions {
			compatible = "fixed-partitions";
			#address-cells = <1>;
			#size-cells = <1>;

			/* Use last 17 kB of SecDom NVM storage. */
			suit_storage: partition@1eec00 {
				label = "suit_storage";
				reg = <0x1eec00 DT_SIZE_K(17)>;
			};
		};
	};

	dfu_storage: mram@1e100000 {
		compatible = "soc-nv-flash";
		reg = <0x1e100000 DT_SIZE_K(512)>;
		erase-block-size = <128>;
		write-block-size = <1>;

		partitions {
			compatible = "fixed-partitions";
			#address-cells = <1>;
			#size-cells = <1>;

			/* Use the first half of the MRAM11 NVM as DFU partition. */
			dfu_partition: partition@100000 {
				label = "dfu_partition";
				reg = <0x100000 DT_SIZE_K(512)>;
			};
		};
	};
};

&spu131 {
	status = "okay";
};

&spu133 {
	status = "okay";
};

&spu137 {
	status = "okay";
};

&spu200 {
	status = "okay";
};
