#
# Copyright (c) 2021 Nordic Semiconductor
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

mainmenu "Matter Lock sample application"

config LOCK_NUM_USERS
	int "Maximum number of users supported by lock"
	default 10

config LOCK_NUM_CREDENTIALS
	int "Maximum number of credentials supported by lock"
	default 20

config LOCK_NUM_CREDENTIALS_PER_USER
	int "Maximum number of credentials per user supported by lock"
	default 3

# Sample configuration used for Thread networking
if NET_L2_OPENTHREAD

choice OPENTHREAD_NORDIC_LIBRARY_CONFIGURATION
	default OPENTHREAD_NORDIC_LIBRARY_MTD
endchoice

choice OPENTHREAD_DEVICE_TYPE
	default OPENTHREAD_MTD
endchoice

config CHIP_ENABLE_SLEEPY_END_DEVICE_SUPPORT
	bool
	default y

endif # NET_L2_OPENTHREAD

if !(SOC_SERIES_NRF54HX) && !(CONFIG_EMULATOR_FPGA)

config STATE_LEDS
	bool "Use LEDs to indicate the device state"
	default y
	help
	  Use LEDs to render the current state of the device such as the progress of commissioning of
	  the device into a network or the factory reset initiation. Note that setting this option to
	  'n' does not disable the LED indicating the state of the simulated bolt.

if MPSL_FEM

config OPENTHREAD_DEFAULT_TX_POWER
	int "Set the default 802.15.4 output power (dBm) for device with FEM"
	range -40 20
	default 20
	help
	  Use this setting to set the default Thread (802.15.4) output power for device that
	  uses FEM. This value has a unit in dBm and represents the Tx power at Antenna port of FEM device.

# override FEM GAIN to 20 dB as a default
# see subsys/mpsl/fem/Kconfig
# Leave MPSL_FEM_NRF21540_TX_GAIN_DB unchanged when OPENTHREAD_DEFAULT_TX_POWER=0
# to set the output power to a similar value as for nRF52840DK.
config MPSL_FEM_NRF21540_TX_GAIN_DB
	default 20 if OPENTHREAD_DEFAULT_TX_POWER != 0

endif # MPSL_FEM


source "${ZEPHYR_BASE}/../modules/lib/matter/config/nrfconnect/chip-module/Kconfig.features"
source "${ZEPHYR_BASE}/../modules/lib/matter/config/nrfconnect/chip-module/Kconfig.defaults"

endif # !(SOC_SERIES_NRF54HX) && !(CONFIG_EMULATOR_FPGA)

if (CONFIG_EMULATOR_FPGA || SOC_SERIES_NRF54HX)

config MBEDTLS_USER_CONFIG_ENABLE
	default y

config MBEDTLS_USER_CONFIG_FILE
	default "${ZEPHYR_BASE}/../nrf/samples/matter/lock/mbedtls_config.h"

config GPIO_NRFX
	default n

config CHIP_LIB_SHELL
	default y

config MATTER_LOCK_MRAM_SETTINGS
	bool "Enable MRAM as settings backend"
	help
	  Use this settings to enable MRAM as settings backend for Matter Lock sample,
	  If that config is disabled Zephyr's settings will be stored in ram using Flash Simulator.

if !(MATTER_LOCK_MRAM_SETTINGS)

	# simulate flash to store settings in RAM
	config SOC_FLASH_NRF
		bool
		default n

	config FLASH_SIMULATOR
		bool
		default y

	config FLASH_SIMULATOR_UNALIGNED_READ
		bool
		default y

	config FLASH_SIMULATOR_DOUBLE_WRITES
		bool
		default y

endif # MATTER_LOCK_MRAM_SETTINGS

source "${ZEPHYR_BASE}/../nrf/samples/matter/lock/configuration/next/Kconfig.next"
source "${ZEPHYR_BASE}/../modules/lib/matter/config/nrfconnect/chip-module/Kconfig.features"

endif # SOC_SERIES_NRF54HX

source "Kconfig.zephyr"
